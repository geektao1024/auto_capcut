# 🎬 CapCut 草稿自动生成器

## 📖 功能说明

自动从 `00批量出图` 文件夹读取素材（音频+图片），一键生成 CapCut 草稿。

---

## 🚀 快速开始

### 1. 准备素材

在 `00批量出图` 文件夹下，按日期创建子文件夹：

```
00批量出图/
├── 1013 挖泳池/
│   ├── audio.mp3        # 音频文件
│   ├── 图片1.png
│   ├── 图片2.png
│   └── 图片3.png
├── 1012 蛋糕比赛/
│   ├── voice.mp3
│   ├── img1.jpg
│   └── img2.jpg
└── 1011 涂颜色/
    ├── sound.wav
    └── ...
```

**支持的格式：**
- 🎵 音频：mp3, wav, m4a, aac
- 🖼️ 图片：png, jpg, jpeg

---

### 2. 运行脚本

```bash
cd /Users/mac/YouTube/01工具类/playwright
python3 auto_capcut_draft.py
```

---

### 3. 选择文件夹

脚本会列出所有可用的文件夹，选择要处理的：

```
📁 可用的素材文件夹:
====================================================================
 1. 1013 挖泳池                [🎵 1 音频, 🖼️  5 图片]
 2. 1012 蛋糕比赛              [🎵 1 音频, 🖼️  3 图片]
 3. 1011 涂颜色                [🎵 1 音频, 🖼️  4 图片]

 0. 退出
====================================================================

请选择文件夹编号: 1
```

---

### 4. 确认创建

```
确认创建草稿？(y/n): y

🎬 开始创建 CapCut 草稿: 1013 挖泳池
====================================================================
✅ 复制模板结构
✅ 复制音频文件
✅ 复制 5 张图片

====================================================================
✅ 草稿创建完成！
====================================================================
📝 草稿名称: 1013 挖泳池_150530
📁 草稿路径: ~/Movies/CapCut/User Data/Projects/com.lveditor.draft/1013 挖泳池_150530
⏱️  总时长: 19.64 秒
🎵 音频: 1 个
🖼️  图片: 5 个
🎬 视频片段: 5 个
```

---

### 5. 在 CapCut 中打开

1. 打开 CapCut 应用
2. 在项目列表中找到新创建的草稿
3. 双击打开进行编辑
4. 完成后导出视频

---

## ⚙️ 配置说明

### 修改素材文件夹路径

编辑 `auto_capcut_draft.py` 第 16 行：

```python
# 素材根目录
MATERIAL_BASE_FOLDER = "/Users/mac/YouTube/00批量出图"
```

### 修改 CapCut 路径（通常不需要）

第 19-21 行：

```python
# CapCut 草稿目录
CAPCUT_DRAFTS_FOLDER = os.path.expanduser(
    "~/Movies/CapCut/User Data/Projects/com.lveditor.draft"
)
```

---

## 🎨 生成的草稿特性

✅ **16:9 高清视频**（1920x1080）  
✅ **图片平均分配**到音频时长  
✅ **自动对齐时间轴**  
✅ **素材内嵌**（不会丢失文件）  
✅ **即开即用**（无需手动导入）

---

## 📊 时间轴示例

```
音频时长：20秒，3张图片

时间轴：
0:00 ━━━━━━━ 6.67s  [图片1]
6.67 ━━━━━━━ 13.33s [图片2]
13.33 ━━━━━ 20.00s [图片3]
━━━━━━━━━━━━━━━━━━━━━━━━━━━
         [🎵 音频]
```

---

## 🐛 常见问题

### Q1: 提示 "未找到可用的素材文件夹"

**解决：**
- 检查 `00批量出图` 路径是否正确
- 确保文件夹下有子文件夹

### Q2: 提示 "该文件夹没有音频文件"

**解决：**
- 确保文件夹中有音频文件
- 检查文件格式是否支持（mp3/wav/m4a/aac）

### Q3: 提示 "未找到可用的模板草稿"

**解决：**
- 先在 CapCut 中手动创建一个项目
- 或者复制一个现有的草稿到草稿文件夹

### Q4: CapCut 中看不到草稿

**解决：**
- 重启 CapCut 应用
- 检查草稿路径是否正确

---

## 🎯 进阶功能（待实现）

- [ ] 支持多个音频文件（自动拼接）
- [ ] 智能图片分配（根据音频长短句）
- [ ] 自动生成字幕（Whisper）
- [ ] 自动添加转场效果
- [ ] 批量处理多个文件夹
- [ ] 自定义视频比例（9:16竖屏）

---

## 📝 更新日志

### v1.0 (2025-10-14)

- ✅ 基础功能实现
- ✅ 交互式文件夹选择
- ✅ 自动复制素材到草稿内部
- ✅ 自动生成完整草稿结构

---

## 💡 使用技巧

### 1. 文件命名建议

```
推荐：
✅ 1013 挖泳池/
✅ 1012_蛋糕比赛/
✅ 20251013-视频标题/

避免：
❌ 文件夹名 (1)/
❌ 新建文件夹/
```

### 2. 批量处理

```bash
# 一次处理多个项目
for folder in 1013 1012 1011; do
    echo "处理 $folder"
    # 手动选择对应编号即可
done
```

### 3. 快速重新生成

如果草稿有问题，直接重新运行脚本选择同一个文件夹，会生成新的草稿（带时间戳）。

---

## 📞 技术支持

如有问题，请检查：
1. Python 版本（需要 3.6+）
2. mutagen 库是否安装（`pip3 install mutagen`）
3. 文件路径权限是否正确

---

*自动化让创作更简单！* 🚀

