# 🎨 特效功能说明 - v2.4

## ✨ 新增功能

### 1️⃣ **震动画面特效** 

自动为所有图片添加震动特效，参数可配置。

**默认参数：**
- **速度：** 2.0
- **强度：** 5.0

---

## 📊 功能对比

### v2.3 vs v2.4

| 功能 | v2.3 | v2.4 ⭐ |
|------|------|--------|
| 开头音效 | ✅ | ✅ |
| 画面特效 | ❌ | ✅ **震动** |
| 特效可配置 | - | ✅ 速度+强度 |

---

## ⚙️ 配置说明

### 修改配置文件

编辑 `auto_capcut_draft_enhanced.py` 第 67-70 行：

```python
# 画面特效配置
ENABLE_SHAKE_EFFECT = True  # 是否启用震动特效
SHAKE_SPEED = 2.0           # 震动速度（0-10）
SHAKE_INTENSITY = 5.0       # 震动强度（0-10）
```

---

## 🎯 参数调整指南

### 震动速度（SHAKE_SPEED）

| 值 | 效果 | 适用场景 |
|----|------|---------|
| 0.5 | 很慢 | 平静场景 |
| 1.0 | 慢 | 温和效果 |
| **2.0** | **中等** ⭐ | **推荐默认** |
| 5.0 | 快 | 动感场景 |
| 10.0 | 极快 | 激烈场景 |

### 震动强度（SHAKE_INTENSITY）

| 值 | 效果 | 视觉感受 |
|----|------|---------|
| 1.0 | 微弱 | 几乎看不出 |
| 3.0 | 轻微 | 略有晃动 |
| **5.0** | **中等** ⭐ | **明显但不夸张** |
| 7.0 | 强烈 | 明显抖动 |
| 10.0 | 极强 | 剧烈震动 |

---

## 🎬 在 CapCut 中的效果

### 应用范围

**震动特效会自动添加到：**
- ✅ 所有图片片段
- ✅ 包括短音频配图（1张）
- ✅ 包括长音频配图（2张）

### 时间轴显示

```
视频轨道：
┌────────────┐┌────────────┐┌──────┐
│  图片1     ││  图片2     ││ 图3  │
│  震动特效  ││  震动特效  ││震动  │
│  速度=2    ││  速度=2    ││速=2  │
│  强度=5    ││  强度=5    ││强=5  │
└────────────┘└────────────┘└──────┘
```

### 特效面板

在 CapCut 中选中任意图片片段，可以看到：

```
特效参数：
├─ 名称: 震动
├─ 速度: 2.0 ✅ (可调整)
├─ 强度: 5.0 ✅ (可调整)
└─ 应用范围: 整个片段
```

---

## 🔧 自定义配置示例

### 示例 1：温和震动

```python
ENABLE_SHAKE_EFFECT = True
SHAKE_SPEED = 1.0        # 慢速
SHAKE_INTENSITY = 3.0    # 轻微
```

**适合：** 温馨、安静的视频

---

### 示例 2：强烈震动（默认）⭐

```python
ENABLE_SHAKE_EFFECT = True
SHAKE_SPEED = 2.0        # 中速
SHAKE_INTENSITY = 5.0    # 中等
```

**适合：** 儿童视频、动感内容

---

### 示例 3：极限震动

```python
ENABLE_SHAKE_EFFECT = True
SHAKE_SPEED = 8.0        # 极快
SHAKE_INTENSITY = 8.0    # 极强
```

**适合：** 恐怖、惊悚、动作场景

---

### 示例 4：关闭特效

```python
ENABLE_SHAKE_EFFECT = False  # 禁用震动
SHAKE_SPEED = 2.0            # 不生效
SHAKE_INTENSITY = 5.0        # 不生效
```

**适合：** 严肃、正式的视频

---

## 📝 完整功能列表

### v2.4 包含的所有功能

| 序号 | 功能 | 状态 | 说明 |
|------|------|------|------|
| 1 | 9:16 竖屏 | ✅ | 适配短视频 |
| 2 | 音频加速 1.08x | ✅ | 自然流畅 |
| 3 | 音量 +13.6dB | ✅ | 清晰响亮 |
| 4 | 智能分段 | ✅ | 移除静音 |
| 5 | 智能配图 | ✅ | 对齐音频 |
| 6 | 素材库 | ✅ | 完整显示 |
| 7 | **开头音效** | ✅ | **惊叹音效** ⭐ |
| 8 | **震动特效** | ✅ | **画面效果** ⭐ |

---

## 🚀 使用流程

### 步骤 1：配置参数（可选）

```python
# 如果需要调整，编辑脚本
SHAKE_SPEED = 3.0      # 改为3
SHAKE_INTENSITY = 7.0  # 改为7
```

### 步骤 2：运行脚本

```bash
双击 "生成草稿.command"
```

### 步骤 3：选择文件夹和模式

```
选择文件夹: 20 (带 ✅ 标记)
启用分段: y
选择模式: 3 (激进)
```

### 步骤 4：在 CapCut 中查看

```
打开 CapCut
├─ 找到新草稿
├─ 选择任意图片片段
├─ 查看右侧特效面板
└─ 可以看到"震动"特效 ✅
```

### 步骤 5：微调（可选）

在 CapCut 中：
- 🎨 调整特效参数
- ✂️ 删除某些片段的特效
- ➕ 添加其他特效

---

## 💡 使用技巧

### 技巧 1：按场景调整

**儿童故事视频：**
```python
SHAKE_SPEED = 2.0
SHAKE_INTENSITY = 5.0  # 默认设置即可
```

**恐怖视频：**
```python
SHAKE_SPEED = 6.0
SHAKE_INTENSITY = 8.0  # 增加紧张感
```

**教学视频：**
```python
ENABLE_SHAKE_EFFECT = False  # 关闭特效
```

---

### 技巧 2：与其他特效组合

在 CapCut 中可以手动添加：
- 震动（已自动）✅
- + 发光效果
- + 模糊效果
- + 色彩调整

---

### 技巧 3：部分片段使用

生成草稿后，在 CapCut 中：
1. 选中不需要震动的片段
2. 右侧特效面板
3. 删除震动特效
4. 完成！

---

## 📊 效果对比

### 无特效 vs 震动特效

**无特效（旧版）：**
```
静态画面
├─ 平稳
├─ 单调
└─ 缺少动感
```

**震动特效（v2.4）：**
```
动态画面 ⭐
├─ 有活力
├─ 吸引眼球
└─ 增加趣味性
```

---

## ⚠️ 注意事项

### 1. 特效强度不宜过大

```python
# ❌ 不推荐
SHAKE_INTENSITY = 10.0  # 太强，可能让人不适

# ✅ 推荐
SHAKE_INTENSITY = 5.0   # 适中，既有效果又舒适
```

### 2. 速度与强度要匹配

**推荐组合：**
- 慢速（1） + 轻微（3） ✅
- 中速（2） + 中等（5） ✅ 默认
- 快速（5） + 强烈（7） ✅

**不推荐组合：**
- 快速（8） + 轻微（2） ❌ 不协调
- 慢速（1） + 极强（10） ❌ 不自然

### 3. 不是所有视频都适合

**适合使用震动：**
- ✅ 儿童视频
- ✅ 搞笑视频
- ✅ 动感内容
- ✅ 惊悚视频

**不适合使用震动：**
- ❌ 正式演讲
- ❌ 教程视频
- ❌ 严肃内容
- ❌ ASMR 视频

---

## 🎨 扩展：如何添加其他特效

如果你想添加其他特效（如模糊、发光等），可以参考震动特效的实现方式：

### 步骤 1：添加配置

```python
# 添加新特效配置
ENABLE_BLUR_EFFECT = True
BLUR_INTENSITY = 5.0
```

### 步骤 2：创建特效材料

```python
blur_effect = {
    "id": str(uuid.uuid4()).upper(),
    "type": "blur",
    "intensity": BLUR_INTENSITY,
    # ... 其他参数
}
draft['materials']['effects'].append(blur_effect)
```

### 步骤 3：应用到片段

```python
segment["extra_material_refs"] = [
    shake_effect_id,
    blur_effect_id  # 可以叠加多个特效
]
```

---

## 🔍 调试技巧

### 查看日志

生成草稿后，查看日志文件：

```bash
cat logs/最新日志.log | grep "特效"
```

**应该看到：**
```
🎨 添加震动画面特效...
✅ 震动特效配置: 速度=2.0, 强度=5.0
🎨 画面特效: 震动 (速度=2.0, 强度=5.0)
```

### 在 CapCut 中验证

1. 打开草稿
2. 选中第一张图片
3. 查看右侧面板
4. 应该有"震动"特效

---

## 📈 性能影响

### 特效对渲染的影响

| 特效数量 | 渲染速度 | 内存占用 |
|---------|---------|---------|
| 0个 | 最快 | 最低 |
| 1个（震动）⭐ | 略慢 5% | 略高 |
| 2-3个 | 中等 | 中等 |
| 5+个 | 较慢 | 较高 |

**结论：** 单个震动特效影响很小，可放心使用。

---

## 🎉 总结

### v2.4 震动特效功能

✅ **自动应用** - 无需手动添加
✅ **参数可调** - 速度和强度
✅ **灵活控制** - 可开关
✅ **CapCut 可改** - 后期可调整
✅ **性能良好** - 影响很小

### 推荐配置

**儿童短视频（默认）：**
```python
ENABLE_SHAKE_EFFECT = True
SHAKE_SPEED = 2.0
SHAKE_INTENSITY = 5.0
```

**立即体验：**
```bash
双击 "生成草稿.command"
```

---

*v2.4 - 让你的视频更有动感！* 🎨✨

